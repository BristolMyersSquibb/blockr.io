% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/read.R
\name{new_read_block}
\alias{new_read_block}
\title{Unified file reading block}
\usage{
new_read_block(
  paths = character(),
  source = "upload",
  combine = "auto",
  volumes = blockr_option("volumes", c(home = path.expand("~"))),
  upload_path = blockr_option("upload_path", Sys.getenv("BLOCKR_UPLOAD_PATH",
    rappdirs::user_data_dir("blockr"))),
  ...
)
}
\arguments{
\item{paths}{Character vector of file paths to pre-load. When provided,
automatically switches to "path" mode regardless of the source parameter.}

\item{source}{Either "upload" for file upload widget or "path" for file browser.
Note: automatically set to "path" when paths parameter is provided.}

\item{combine}{Strategy for combining multiple files: "auto", "rbind", "cbind", "first"}

\item{volumes}{Named character vector of volume paths for file browser mode.
Can be set globally via \code{options(blockr.volumes = c(name = "path"))} or
environment variable BLOCKR_VOLUMES.}

\item{upload_path}{Directory for storing uploaded files persistently. Can be set
via \code{options(blockr.upload_path = "/path")} or environment variable
BLOCKR_UPLOAD_PATH. Default uses rappdirs::user_data_dir("blockr").}

\item{...}{Forwarded to \code{\link[blockr.core:new_data_block]{blockr.core::new_data_block()}}}
}
\value{
A blockr data block that reads file(s) and returns a data.frame.
}
\description{
A single block for reading files in various formats with smart UI that adapts
based on detected file type. Supports both upload and browse modes with
persistent storage for uploaded files.
}
\details{
\subsection{File Handling Modes}{

The block supports two modes:

\strong{Upload mode:}
\itemize{
\item User uploads files via fileInput widget
\item Files are copied to persistent storage directory (upload_path)
\item State stores permanent file paths
\item Works across R sessions with state restoration
}

\strong{Browse mode:}
\itemize{
\item User browses file system with shinyFiles
\item Directly selects existing files
\item State stores selected file paths
\item No file copying, reads from original location
}

Both modes store file paths in state for restoration.
}

\subsection{Smart Adaptive UI}{

After file selection, the UI detects file type and shows relevant options:
\itemize{
\item \strong{CSV/TSV:} Delimiter, quote character, encoding options
\item \strong{Excel:} Sheet selection, cell range
\item \strong{Other formats:} Minimal or no options (handled automatically)
}
}

\subsection{Multi-file Support}{

When multiple files are selected:
\itemize{
\item \strong{"auto"}: Attempts rbind, falls back to first file if incompatible
\item \strong{"rbind"}: Row-binds files (requires same columns)
\item \strong{"cbind"}: Column-binds files (requires same row count)
\item \strong{"first"}: Uses only the first file
}
}
}
\examples{
\dontrun{
# Basic usage with upload
serve(new_read_block())

# Pre-load specific files
serve(new_read_block(paths = c("data.csv", "more_data.csv")))

# Browse mode with custom volumes
serve(new_read_block(
  source = "path",
  volumes = c(home = "~", data = "/path/to/data")
))

# Specify upload storage location
serve(new_read_block(upload_path = "/my/storage/dir"))
}

}
