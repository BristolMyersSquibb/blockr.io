% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/read.R
\name{new_read_block}
\alias{new_read_block}
\title{Unified file reading block}
\usage{
new_read_block(
  path = character(),
  source = "path",
  combine = "auto",
  csv_sep = ",",
  csv_quote = "\\"",
  csv_encoding = "UTF-8",
  csv_skip = 0,
  csv_n_max = Inf,
  csv_col_names = TRUE,
  excel_sheet = NULL,
  excel_range = NULL,
  excel_skip = 0,
  excel_n_max = Inf,
  excel_col_names = TRUE,
  ...
)
}
\arguments{
\item{path}{Character vector of file paths to pre-load. When provided,
automatically switches to "path" mode regardless of the source parameter.}

\item{source}{Either "upload" for file upload widget, "path" for file browser,
or "url" for URL download. Automatically set based on path parameter.}

\item{combine}{Strategy for combining multiple files: "auto", "rbind", "cbind", "first"}

\item{csv_sep}{CSV delimiter character (default: ",")}

\item{csv_quote}{CSV quote character (default: '"')}

\item{csv_encoding}{CSV encoding (default: "UTF-8")}

\item{csv_skip}{Number of rows to skip before reading CSV data (default: 0)}

\item{csv_n_max}{Maximum number of rows to read from CSV (default: Inf)}

\item{csv_col_names}{Use first row as column names for CSV (default: TRUE)}

\item{excel_sheet}{Excel sheet name or number (optional)}

\item{excel_range}{Excel cell range (optional, e.g., "A1:C10")}

\item{excel_skip}{Number of rows to skip before reading Excel data (default: 0)}

\item{excel_n_max}{Maximum number of rows to read from Excel (default: Inf)}

\item{excel_col_names}{Use first row as column names for Excel (default: TRUE)}

\item{...}{Forwarded to \code{\link[blockr.core:new_data_block]{blockr.core::new_data_block()}}}
}
\value{
A blockr data block that reads file(s) and returns a data.frame.
}
\description{
A single block for reading files in various formats with smart UI that adapts
based on detected file type. Supports both upload and browse modes with
persistent storage for uploaded files.
}
\details{
\subsection{File Handling Modes}{

The block supports three modes:

\strong{Upload mode:}
\itemize{
\item User uploads files via fileInput widget
\item Files are copied to persistent storage directory (upload_path)
\item State stores permanent file paths
\item Works across R sessions with state restoration
}

\strong{Browse mode:}
\itemize{
\item User browses file system with shinyFiles
\item Directly selects existing files
\item State stores selected file paths
\item No file copying, reads from original location
}

\strong{URL mode:}
\itemize{
\item User provides a URL to a data file
\item File is downloaded to temporary location each time
\item Always fetches fresh data from URL
\item State stores the URL (not file path)
}
}

\subsection{Smart Adaptive UI}{

After file selection, the UI detects file type and shows relevant options:
\itemize{
\item \strong{CSV/TSV:} Delimiter, quote character, encoding options
\item \strong{Excel:} Sheet selection, cell range
\item \strong{Other formats:} Minimal or no options (handled automatically)
}
}

\subsection{Multi-file Support}{

When multiple files are selected:
\itemize{
\item \strong{"auto"}: Attempts rbind, falls back to first file if incompatible
\item \strong{"rbind"}: Row-binds files (requires same columns)
\item \strong{"cbind"}: Column-binds files (requires same row count)
\item \strong{"first"}: Uses only the first file
}
}
}
\section{Configuration}{

The following settings are retrieved from options and not stored in block state:
\itemize{
\item \strong{volumes}: File browser mount points. Set via \code{options(blockr.volumes = c(name = "path"))}
or environment variable \code{BLOCKR_VOLUMES}. Default: \code{c(home = "~")}
\item \strong{upload_path}: Directory for persistent file storage. Set via
\code{options(blockr.upload_path = "/path")} or environment variable \code{BLOCKR_UPLOAD_PATH}.
Default: \code{rappdirs::user_data_dir("blockr")}
}
}

\examples{
\dontrun{
# Basic usage with upload
serve(new_read_block())

# Pre-load specific files
serve(new_read_block(paths = c("data.csv", "more_data.csv")))

# Browse mode with custom volumes
serve(new_read_block(
  source = "path",
  volumes = c(home = "~", data = "/path/to/data")
))

# URL mode - fetch remote data
serve(new_read_block(
  url = "https://raw.githubusercontent.com/user/repo/main/data.csv"
))

# Specify upload storage location
serve(new_read_block(upload_path = "/my/storage/dir"))
}

}
